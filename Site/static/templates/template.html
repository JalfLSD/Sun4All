<link href="/sun4all/styles.css" rel="stylesheet" type="text/css">

<script src="/sun4all/js/kinetic-v4.7.2.min.js"
	type="text/javascript"></script>

<script src="/sun4all/js/game.js" type="text/javascript"></script>
<script src="/sun4all/js/jquery.i18n.min.js" type="text/javascript"></script>
<script src="/sun4all/js/sun4all.i18n.js" type="text/javascript"></script>

<script type="text/javascript">
	pybossa.taskLoaded(function(task, deferred) {
		deferred.resolve(task);
	});

	pybossa.presentTask(function(task, deferred) {
		if (!$.isEmptyObject(task)) {
			start(task, deferred);
		}
	});

	// run task
	pybossa.setEndpoint("/pybossa");
	pybossa.run('Sun4All');
</script>


<div id="mainDivGame" class="blockDiv">
	<!--Header Div-->
	<div id="headerDiv" class="header">
		<span id="experiment-info" onclick="loadTutorial();"
			style="cursor: pointer"> <img style="left: 758px"
			class="headerButton" src="/sun4all/images/info.png"
			onmouseover="javascript:ChangeImage(this,'/sun4all/images/infoOver.png');"
			onmouseout="javascript:ChangeImage(this,'/sun4all/images/info.png');" />
		</span> <a id="twitter-share"
			href="javascript:openShareWindow('http://twitter.com/share?text=Contribute%20with%20our%20project!&url=http://pybossa.socientize.eu/pybossa/app/sun4all');"
			data-toggle="tooltip"> <img class="headerButton"
			style="left: 767px" src="/sun4all/images/twitter.png"
			onmouseover="javascript:ChangeImage(this,'/sun4all/images/twitterOver.png');"
			onmouseout="javascript:ChangeImage(this,'/sun4all/images/twitter.png');" />
		</a> <a id="facebook-share"
			href="javascript:openShareWindow('http://www.facebook.com/sharer.php?u=http://pybossa.socientize.eu/pybossa/app/sun4all');"
			data-toggle="tooltip"> <img class="headerButton"
			style="left: 774px" src="/sun4all/images/facebook.png"
			onmouseover="javascript:ChangeImage(this,'/sun4all/images/facebookOver.png');"
			onmouseout="javascript:ChangeImage(this,'/sun4all/images/facebook.png');" />
		</a> <a id="google-plus-share"
			href="javascript:openShareWindow('https://plus.google.com/share?url=http://pybossa.socientize.eu/pybossa/app/sun4all');"
			data-toggle="tooltip"> <img class="headerButton"
			style="left: 780px" src="/sun4all/images/gPlus.png"
			onmouseover="javascript:ChangeImage(this,'/sun4all/images/gPlusOver.png');"
			onmouseout="javascript:ChangeImage(this,'/sun4all/images/gPlus.png');" />
		</a>
		<div id="questionDiv"
			style="position: relative; left: 30px; width: 720px; top: -12px;">
			<label style="font-size: 24px;" id="lblQuestion">Sun4All</label>
		</div>
	</div>

	<!--Picture Div-->
	<div class="pictureDiv">
		<label id="lblImage">Satellite Image</label> <img
			style="width: 600px; height: 600px; border: solid;"
			src="/sun4all/images/loading.gif" id="loadingPicture" />
		<div id="pictureCanvas"
			style="width: 600px; height: 600px; position: absolute; left: 0; display: none; border: solid; background-color: white"></div>
	</div>

	<!--Observation Div-->
	<div
		style="position: relative; top: 0px; left: 610px; width: 200px; height: 313px; border: solid; padding: 10px;">
		<fieldset>
			<legend id="observation-title"> </legend>
			<button id="btnAddSpot" class="btn btn-warning" disabled
				type="button" style="width: 100%;" onclick="javascript:addSpot();"></button>
			<button id="btnAddCluster" class="btn btn-primary" disabled
				type="button" style="width: 100%; margin-top: 10px"
				onclick="javascript:addCluster();"></button>
			<button id="removeSpotOrCluster" class="btn" disabled type="button"
				style="width: 100%; margin-top: 10px"
				onclick="javascript:removeSelectedCircle();"></button>
			<label id="addInfoTxtBox" style="margin-top: 15px;"></label>
			<textarea id="txtObservation"
				style="width: 90%; height: 90px; resize: none;" rows="3"></textarea>
		</fieldset>
	</div>

	<!--Your Data-->
	<div
		style="position: relative; border: solid; padding: 10px; width: 200px; top: 5px; left: 610px; min-height: 236px;">
		<fieldset>
			<legend id="yourdata-label" style="margin-bottom: 15px;"></legend>
			<h4>
				<label id="spotCount-title" style="float: left; margin-right: 5px;"></label><label
					id="lblspotCount">0</label>
			</h4>
			<h4>
				<label id="clusterCount-title"
					style="float: left; margin-right: 5px;"></label><label
					id="lblclusterCount">0</label>
			</h4>
		</fieldset>

		<button id="btnFinish" class="btn btn-success" type="button"
			style="width: 100%; height: 60px; margin-top: 5px"
			onclick="javascript:done();">
			<i class="icon-ok icon-white"></i> <span id="btnFinish-label"></span>
		</button>
		<button id="btnStartOver" class="btn btn-warning" type="button"
			style="width: 100%; margin-top: 10px"
			onclick="javascript:startOver();">
			<i class="icon-repeat icon-white"></i> <span id="btnStartOver-label"></span>
		</button>
	</div>

	<!--Toolbar-->

	<div
		style="position: relative; top: -50px; float: left; width: 604px; text-align: center;">
		<div class="btn-toolbar">
			<!--Zoom buttons-->
			<div class="btn-group">
				<button type="button" onclick="javascript: doZoom(-0.030);"
					class="btn btn-primary">
					<i class="icon-zoom-out icon-white"></i>&nbsp;
				</button>
				<button id="btnResetZoom" type="button"
					onclick="javascript:reset();" class="btn btn-primary"></button>
				<button type="button" onclick="javascript: doZoom(0.030);"
					class="btn btn-primary">
					<i class="icon-zoom-in icon-white"></i>&nbsp;
				</button>
			</div>

			<!--move buttons-->
			<div class="btn-group">
				<button type="button" onclick="javascript: down();"
					class="btn btn-primary">
					<i class="icon-arrow-down icon-white"></i>&nbsp;
				</button>
				<button type="button" onclick="javascript: up();"
					class="btn btn-primary">
					<i class="icon-arrow-up icon-white"></i>&nbsp;
				</button>
				<button type="button" onclick="javascript: left();"
					class="btn btn-primary">
					<i class="icon-arrow-left icon-white"></i>&nbsp;
				</button>
				<button type="button" onclick="javascript: right();"
					class="btn btn-primary">
					<i class="icon-arrow-right icon-white"></i>&nbsp;
				</button>
			</div>

			<!--other buttons-->
			<div class="btn-group">
				<button id="btnInvert" disabled class="btn btn-primary"
					onclick="javascript:invertImage();">
					<i class="icon-adjust icon-white"></i> <span id="btnInvert-label"></span>
				</button>
			</div>
		</div>
	</div>
</div>


<!-- Info Dialog -->
<div id="infoDialog" style="display: none;"></div>

<!-- Completed Dialog -->
<div id="completedDialog" class="modal hide fade" style="width: 450px"
	tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal"
			aria-hidden="true">×</button>
		<h3 id="congratulations"></h3>
	</div>
	<div id="completed-task" class="modal-body">
	</div>
	<div class="modal-footer">
		<button id="take-another-task" class="btn btn-success" data-dismiss="modal"></button>
	</div>
</div>

<script type="text/javascript">
	//Initialize interface
	$("#mainDivGame").ready(function() {
		$("#observation-title").text($.i18n._('observation-title'));
		$("#btnAddSpot").text($.i18n._('btnAddSpot'));
		$("#btnAddCluster").text($.i18n._('btnAddCluster'));
		$("#removeSpotOrCluster").text($.i18n._('removeSpotOrCluster'));
		$("#addInfoTxtBox").text($.i18n._('addInfoTxtBox'));
		$("#yourdata-label").text($.i18n._('yourdata-label'));
		$("#spotCount-title").text($.i18n._('spotCount-title'));
		$("#clusterCount-title").text($.i18n._('clusterCount-title'));
		$("#btnFinish-label").text($.i18n._('btnFinish-label'));
		$("#btnStartOver-label").text($.i18n._('btnStartOver-label'));
		$("#btnResetZoom").text($.i18n._('btnResetZoom'));
		$("#btnInvert-label").text($.i18n._('btnInvert-label'));
		$("#congratulations").text($.i18n._('congratulations'));
		$("#completed-task").text($.i18n._('completed-task'));
		$("#take-another-task").text($.i18n._('take-another-task'));
		
		$("#experiment-info").attr("title", $.i18n._('experiment-info'));
		$("#twitter-share").attr("title", $.i18n._('twitter-share'));
		$("#facebook-share").attr("title", $.i18n._('facebook-share'));
		$("#google-plus-share").attr("title", $.i18n._('google-plus-share'));
	});

	setupKinect();

	//var templateServer = "localhost/sun4all/";
	//var templateServer = "pybossa.socientize.eu/sun4all/static";

	function loadTutorial() {
		$("#infoDialog").empty();
		$("#infoDialog")
				.load(
						"/sun4all/templates/tutorial.html",
						function() {
							$("#infoDialog").show();
							$("#startContrib-label")
									.html($.i18n._('continueContrib-label'));
							$("#startContrib").click(function(e) {
								e.preventDefault();
								$("#modal").modal('hide');
							});
						})
	}
</script>
